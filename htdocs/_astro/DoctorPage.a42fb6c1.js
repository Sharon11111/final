import{A as ur,D as fr,d as gr}from"./Doctors.ada77115.js";import{_ as mr,c as N,u as U,x as yr,z as vr,r as p,B as Sr,j as s,P as br,J as xr,T as B,e as _r,H as hr,L as wr,F as D,d as zr}from"./Layout.5758eb4e.js";import{r as d,R}from"./index.37e2c5d5.js";import{a as Z,e as Q}from"./api.224f316e.js";import{I as E}from"./Input.eca647b4.js";function Pr(r){return Object.keys(r)}function $r(r,o){if(r==null)return{};var e={},t=Object.keys(r),a,n;for(n=0;n<t.length;n++)a=t[n],!(o.indexOf(a)>=0)&&(e[a]=r[a]);return e}var kr=d.useLayoutEffect,Or=function(o){var e=d.useRef(o);return kr(function(){e.current=o}),e},M=function(o,e){if(typeof o=="function"){o(e);return}o.current=e},Rr=function(o,e){var t=d.useRef();return d.useCallback(function(a){o.current=a,t.current&&M(t.current,null),t.current=e,e&&M(e,a)},[e])},q={"min-height":"0","max-height":"none",height:"0",visibility:"hidden",overflow:"hidden",position:"absolute","z-index":"-1000",top:"0",right:"0"},V=function(o){Object.keys(q).forEach(function(e){o.style.setProperty(e,q[e],"important")})},f=null,Tr=function(o,e){var t=o.scrollHeight;return e.sizingStyle.boxSizing==="border-box"?t+e.borderSize:t-e.paddingSize};function jr(r,o,e,t){e===void 0&&(e=1),t===void 0&&(t=1/0),f||(f=document.createElement("textarea"),f.setAttribute("tabindex","-1"),f.setAttribute("aria-hidden","true"),V(f)),f.parentNode===null&&document.body.appendChild(f);var a=r.paddingSize,n=r.borderSize,c=r.sizingStyle,g=c.boxSizing;Object.keys(c).forEach(function(S){var b=S;f.style[b]=c[b]}),V(f),f.value=o;var l=Tr(f,r);f.value="x";var m=f.scrollHeight-a,i=m*e;g==="border-box"&&(i=i+a+n),l=Math.max(i,l);var u=m*t;return g==="border-box"&&(u=u+a+n),l=Math.min(u,l),[l,m]}var G=function(){},Cr=function(o,e){return o.reduce(function(t,a){return t[a]=e[a],t},{})},Hr=["borderBottomWidth","borderLeftWidth","borderRightWidth","borderTopWidth","boxSizing","fontFamily","fontSize","fontStyle","fontWeight","letterSpacing","lineHeight","paddingBottom","paddingLeft","paddingRight","paddingTop","tabSize","textIndent","textRendering","textTransform","width","wordBreak"],Er=!!document.documentElement.currentStyle,Lr=function(o){var e=window.getComputedStyle(o);if(e===null)return null;var t=Cr(Hr,e),a=t.boxSizing;if(a==="")return null;Er&&a==="border-box"&&(t.width=parseFloat(t.width)+parseFloat(t.borderRightWidth)+parseFloat(t.borderLeftWidth)+parseFloat(t.paddingRight)+parseFloat(t.paddingLeft)+"px");var n=parseFloat(t.paddingBottom)+parseFloat(t.paddingTop),c=parseFloat(t.borderBottomWidth)+parseFloat(t.borderTopWidth);return{sizingStyle:t,paddingSize:n,borderSize:c}},Br=function(o){var e=Or(o);d.useLayoutEffect(function(){var t=function(n){e.current(n)};return window.addEventListener("resize",t),function(){window.removeEventListener("resize",t)}},[])},Nr=function(o,e){var t=o.cacheMeasurements,a=o.maxRows,n=o.minRows,c=o.onChange,g=c===void 0?G:c,l=o.onHeightChange,m=l===void 0?G:l,i=$r(o,["cacheMeasurements","maxRows","minRows","onChange","onHeightChange"]),u=i.value!==void 0,S=d.useRef(null),b=Rr(S,e),v=d.useRef(0),x=d.useRef(),_=function(){var y=S.current,z=t&&x.current?x.current:Lr(y);if(z){x.current=z;var $=jr(z,y.value||y.placeholder||"x",n,a),h=$[0],H=$[1];v.current!==h&&(v.current=h,y.style.setProperty("height",h+"px","important"),m(h,{rowHeight:H}))}},P=function(y){u||_(),g(y)};return d.useLayoutEffect(_),Br(_),d.createElement("textarea",mr({},i,{onChange:P,ref:b}))},Fr=d.forwardRef(Nr);const Wr=Fr;var Ir=N(r=>({input:{paddingTop:r.spacing.xs,paddingBottom:r.spacing.xs}}));const Ar=Ir;var Dr=Object.defineProperty,Mr=Object.defineProperties,qr=Object.getOwnPropertyDescriptors,T=Object.getOwnPropertySymbols,rr=Object.prototype.hasOwnProperty,er=Object.prototype.propertyIsEnumerable,X=(r,o,e)=>o in r?Dr(r,o,{enumerable:!0,configurable:!0,writable:!0,value:e}):r[o]=e,w=(r,o)=>{for(var e in o||(o={}))rr.call(o,e)&&X(r,e,o[e]);if(T)for(var e of T(o))er.call(o,e)&&X(r,e,o[e]);return r},L=(r,o)=>Mr(r,qr(o)),Vr=(r,o)=>{var e={};for(var t in r)rr.call(r,t)&&o.indexOf(t)<0&&(e[t]=r[t]);if(r!=null&&T)for(var t of T(r))o.indexOf(t)<0&&er.call(r,t)&&(e[t]=r[t]);return e};const Gr={autosize:!1,size:"sm",__staticSelector:"Textarea"},or=d.forwardRef((r,o)=>{const e=U("Textarea",Gr,r),{autosize:t,maxRows:a,minRows:n,label:c,error:g,description:l,id:m,className:i,required:u,style:S,wrapperProps:b,classNames:v,styles:x,size:_,__staticSelector:P,sx:C,errorProps:y,descriptionProps:z,labelProps:$,inputWrapperOrder:h,inputContainer:H,unstyled:F,withAsterisk:ir,variant:W}=e,sr=Vr(e,["autosize","maxRows","minRows","label","error","description","id","className","required","style","wrapperProps","classNames","styles","size","__staticSelector","sx","errorProps","descriptionProps","labelProps","inputWrapperOrder","inputContainer","unstyled","withAsterisk","variant"]),I=yr(m),{classes:lr,cx:cr}=Ar(),{systemStyles:dr,rest:pr}=vr(sr),A=w({required:u,ref:o,error:g,id:I,classNames:L(w({},v),{input:cr(lr.input,v?.input)}),styles:x,__staticSelector:P,size:_,multiline:!0,unstyled:F,variant:W},pr);return R.createElement(E.Wrapper,w(w({label:c,error:g,id:I,description:l,required:u,style:S,className:i,classNames:v,styles:x,size:_,__staticSelector:P,sx:C,errorProps:y,labelProps:$,descriptionProps:z,inputContainer:H,inputWrapperOrder:h,unstyled:F,withAsterisk:ir,variant:W},dr),b),t?R.createElement(E,L(w({},A),{component:Wr,maxRows:a,minRows:n})):R.createElement(E,L(w({},A),{component:"textarea",rows:n})))});or.displayName="@mantine/core/Textarea";var Xr=Object.defineProperty,Yr=Object.defineProperties,Jr=Object.getOwnPropertyDescriptors,Y=Object.getOwnPropertySymbols,Kr=Object.prototype.hasOwnProperty,Ur=Object.prototype.propertyIsEnumerable,J=(r,o,e)=>o in r?Xr(r,o,{enumerable:!0,configurable:!0,writable:!0,value:e}):r[o]=e,k=(r,o)=>{for(var e in o||(o={}))Kr.call(o,e)&&J(r,e,o[e]);if(Y)for(var e of Y(o))Ur.call(o,e)&&J(r,e,o[e]);return r},O=(r,o)=>Yr(r,Jr(o)),Zr=N(r=>{const o=Pr(r.headings.sizes).reduce((e,t)=>{const a=r.headings.sizes[t];return e[`& ${t}`]=O(k({fontFamily:r.headings.fontFamily,fontWeight:a.fontWeight||r.headings.fontWeight,marginTop:typeof a.lineHeight=="number"?`calc(${r.spacing.xl} * ${a.lineHeight})`:r.spacing.xl,marginBottom:r.spacing.sm},a),{[r.fn.smallerThan("sm")]:{fontSize:`calc(${p(a.fontSize)} / 1.3)`}}),e},{});return{root:O(k(O(k({},r.fn.fontStyles()),{color:r.colorScheme==="dark"?r.colors.dark[0]:r.black,lineHeight:r.lineHeight,fontSize:r.fontSizes.md,[r.fn.smallerThan("sm")]:{fontSize:r.fontSizes.sm}}),o),{"& img":{maxWidth:"100%",marginBottom:r.spacing.xs},"& p":{marginTop:0,marginBottom:r.spacing.lg},"& mark":{backgroundColor:r.fn.themeColor("yellow",r.colorScheme==="dark"?5:2),color:r.colorScheme==="dark"?r.colors.dark[9]:"inherit"},"& hr":{marginTop:r.spacing.md,marginBottom:r.spacing.sm,borderBottom:0,borderLeft:0,borderRight:0,borderTop:`${p(1)} dashed ${r.colors.gray[r.colorScheme==="dark"?4:6]}`},"& a":O(k({},r.fn.focusStyles()),{color:r.colors[r.primaryColor][r.colorScheme==="dark"?4:6],textDecoration:"none","&:hover":{textDecoration:"underline"}}),"& pre":{padding:r.spacing.xs,lineHeight:r.lineHeight,margin:0,marginTop:r.spacing.md,marginBottom:r.spacing.md,overflowX:"auto",fontFamily:r.fontFamilyMonospace,fontSize:r.fontSizes.sm,borderRadius:r.radius.sm,backgroundColor:r.colorScheme==="dark"?r.colors.dark[8]:r.colors.gray[0],"& code":{backgroundColor:"transparent",padding:0,borderRadius:0,color:"inherit",border:0}},"& code":{lineHeight:r.lineHeight,padding:`${p(1)} ${p(5)}`,borderRadius:r.radius.sm,color:r.colorScheme==="dark"?r.colors.dark[0]:r.black,backgroundColor:r.colorScheme==="dark"?r.colors.dark[9]:r.colors.gray[0],fontFamily:r.fontFamilyMonospace,fontSize:r.fontSizes.xs,border:`${p(1)} solid ${r.colorScheme==="dark"?r.colors.dark[9]:r.colors.gray[3]}`},"& ul, & ol":{marginBottom:r.spacing.md,paddingLeft:38,"& li":{marginTop:r.spacing.xs}},"& table":{width:"100%",borderCollapse:"collapse",captionSide:"bottom",marginBottom:r.spacing.md,"& caption":{marginTop:r.spacing.xs,fontSize:r.fontSizes.sm,color:r.colorScheme==="dark"?r.colors.dark[2]:r.colors.gray[6]},"& th":{textAlign:"left",fontWeight:"bold",color:r.colorScheme==="dark"?r.colors.dark[0]:r.colors.gray[7],fontSize:14,padding:`${p(7)} ${p(10)}`},"& thead th":{borderBottom:`${p(1)} solid ${r.colorScheme==="dark"?r.colors.dark[4]:r.colors.gray[3]}`},"& tfoot th":{borderTop:`${p(1)} solid ${r.colorScheme==="dark"?r.colors.dark[4]:r.colors.gray[3]}`},"& td":{padding:`${p(7)} ${p(10)}`,borderBottom:`${p(1)} solid ${r.colorScheme==="dark"?r.colors.dark[4]:r.colors.gray[3]}`,fontSize:14},"& tr:last-of-type td":{borderBottom:"none"}},"& blockquote":{fontSize:r.fontSizes.lg,lineHeight:r.lineHeight,margin:`${r.spacing.md} 0`,borderTopRightRadius:r.radius.sm,borderBottomRightRadius:r.radius.sm,padding:`${r.spacing.md} ${r.spacing.lg}`,color:r.colorScheme==="dark"?r.colors.dark[0]:r.black,borderLeft:`${p(6)} solid ${r.colorScheme==="dark"?r.colors.dark[4]:r.colors.gray[3]}`,"& cite":{display:"block",fontSize:r.fontSizes.sm,marginTop:r.spacing.xs,color:r.colorScheme==="dark"?r.colors.dark[2]:r.colors.gray[6],overflow:"hidden",textOverflow:"ellipsis"}}})}});const Qr=Zr;var re=Object.defineProperty,j=Object.getOwnPropertySymbols,tr=Object.prototype.hasOwnProperty,ar=Object.prototype.propertyIsEnumerable,K=(r,o,e)=>o in r?re(r,o,{enumerable:!0,configurable:!0,writable:!0,value:e}):r[o]=e,ee=(r,o)=>{for(var e in o||(o={}))tr.call(o,e)&&K(r,e,o[e]);if(j)for(var e of j(o))ar.call(o,e)&&K(r,e,o[e]);return r},oe=(r,o)=>{var e={};for(var t in r)tr.call(r,t)&&o.indexOf(t)<0&&(e[t]=r[t]);if(r!=null&&j)for(var t of j(r))o.indexOf(t)<0&&ar.call(r,t)&&(e[t]=r[t]);return e};const nr=d.forwardRef((r,o)=>{const e=U("TypographyStylesProvider",{},r),{className:t,unstyled:a,variant:n}=e,c=oe(e,["className","unstyled","variant"]),{classes:g,cx:l}=Qr(null,{name:"TypographyStylesProvider",unstyled:a,variant:n});return R.createElement(Sr,ee({className:l(g.root,t),ref:o},c))});nr.displayName="@mantine/core/TypographyStylesProvider";const te=N(r=>({comment:{padding:`${r.spacing.lg} ${r.spacing.xl}`},body:{paddingLeft:p(54),paddingTop:r.spacing.sm,fontSize:r.fontSizes.sm},content:{"& > p:last-child":{marginBottom:0}}}));function ae({postedAt:r,body:o,author:e}){const{classes:t}=te();return s.jsxs(br,{withBorder:!0,radius:"md",className:t.comment,children:[s.jsxs(xr,{children:[s.jsx(ur,{src:"",alt:e.name.substring(0,5),radius:"xl"}),s.jsxs("div",{children:[s.jsx(B,{fz:"sm",children:e.name}),s.jsx(B,{fz:"xs",c:"dimmed",children:r})]})]}),s.jsx(nr,{className:t.body,children:s.jsx("div",{className:t.content,dangerouslySetInnerHTML:{__html:o}})})]})}async function ne(r){return await Z(Q.comment_create,r)}async function ie(r){return await Z(Q.comment_get,{doctor_name:r})}function ue(){const[r,o]=_r(),e=d.useRef(null),[t,a]=d.useState([]),n=window.location.pathname.split("/"),c=n.pop()||n[n.length-1],g=gr[c],l=hr();d.useEffect(()=>{(async()=>{const i=await ie(c);i||alert("404"),i.status==="success"?a(i.comments):alert(i.message)})()},[]);const m=async()=>{if(!o||!e.current)return;const i=e.current.value;if(i===""){alert("不可以空白");return}const u=await ne({identification_number:o.identification_number,body:i,doctor_name:c,created_at:new Date().toISOString().split("T")[0]});if(!u){alert("404");return}u.status==="success"?(alert("收到了！"),e.current.value="",window.location.reload()):alert(u.message)};return s.jsx(wr,{children:s.jsx(D,{justify:"center",children:s.jsxs(D,{direction:"column",gap:"lg",w:500,mb:40,children:[s.jsx(fr,{...g}),t.map((i,u)=>s.jsx(ae,{postedAt:i.created_at,body:i.body,author:{name:i.identification_number,image:""}},i.id)),r?s.jsxs(s.Fragment,{children:[s.jsx(or,{ref:e,placeholder:l.commet_leave_message,label:l.commet_message,autosize:!0,minRows:5}),s.jsx(zr,{variant:"gradient",w:"100%",onClick:m,children:l.commet_submit})]}):s.jsx(B,{children:l.commet_alert})]})})})}export{ue as DoctorPage};
