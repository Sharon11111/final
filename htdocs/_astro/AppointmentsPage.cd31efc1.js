import{c as $,r as k,b as i,u as R,B,j as o,d as C,e as T,L as E,C as A,F as L}from"./Layout.5758eb4e.js";import{d as N,g as D,R as H}from"./RequireLogin.ca4b1b1e.js";import{r as p,R as I}from"./index.37e2c5d5.js";import"./api.224f316e.js";import"./Title.442f82ee.js";var F=Object.defineProperty,V=Object.defineProperties,q=Object.getOwnPropertyDescriptors,f=Object.getOwnPropertySymbols,W=Object.prototype.hasOwnProperty,G=Object.prototype.propertyIsEnumerable,g=(r,e,t)=>e in r?F(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,J=(r,e)=>{for(var t in e||(e={}))W.call(e,t)&&g(r,t,e[t]);if(f)for(var t of f(e))G.call(e,t)&&g(r,t,e[t]);return r},K=(r,e)=>V(r,q(e)),M=$((r,{captionSide:e,horizontalSpacing:t,verticalSpacing:s,fontSize:a,withBorder:c,withColumnBorders:d})=>{const n=`${k(1)} solid ${r.colorScheme==="dark"?r.colors.dark[4]:r.colors.gray[3]}`;return{root:K(J({},r.fn.fontStyles()),{width:"100%",borderCollapse:"collapse",captionSide:e,color:r.colorScheme==="dark"?r.colors.dark[0]:r.black,lineHeight:r.lineHeight,border:c?n:void 0,"& caption":{marginTop:e==="top"?0:r.spacing.xs,marginBottom:e==="bottom"?0:r.spacing.xs,fontSize:r.fontSizes.sm,color:r.colorScheme==="dark"?r.colors.dark[2]:r.colors.gray[6]},"& thead tr th, & tfoot tr th, & tbody tr th":{textAlign:"left",fontWeight:"bold",color:r.colorScheme==="dark"?r.colors.dark[0]:r.colors.gray[7],fontSize:i({size:a,sizes:r.fontSizes}),padding:`${i({size:s,sizes:r.spacing})} ${i({size:t,sizes:r.spacing})}`},"& thead tr th":{borderBottom:n},"& tfoot tr th, & tbody tr th":{borderTop:n},"& tbody tr td":{padding:`${i({size:s,sizes:r.spacing})} ${i({size:t,sizes:r.spacing})}`,borderTop:n,fontSize:i({size:a,sizes:r.fontSizes})},"& tbody tr:first-of-type td, & tbody tr:first-of-type th":{borderTop:"none"},"& thead th, & tbody td":{borderRight:d?n:"none","&:last-of-type":{borderRight:"none",borderLeft:d?n:"none"}},"& tbody tr th":{borderRight:d?n:"none"},"&[data-striped] tbody tr:nth-of-type(odd)":{backgroundColor:r.colorScheme==="dark"?r.colors.dark[6]:r.colors.gray[0]},"&[data-hover] tbody tr":r.fn.hover({backgroundColor:r.colorScheme==="dark"?r.colors.dark[5]:r.colors.gray[1]})})}});const Q=M;var U=Object.defineProperty,X=Object.defineProperties,Y=Object.getOwnPropertyDescriptors,l=Object.getOwnPropertySymbols,h=Object.prototype.hasOwnProperty,u=Object.prototype.propertyIsEnumerable,_=(r,e,t)=>e in r?U(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,Z=(r,e)=>{for(var t in e||(e={}))h.call(e,t)&&_(r,t,e[t]);if(l)for(var t of l(e))u.call(e,t)&&_(r,t,e[t]);return r},rr=(r,e)=>X(r,Y(e)),tr=(r,e)=>{var t={};for(var s in r)h.call(r,s)&&e.indexOf(s)<0&&(t[s]=r[s]);if(r!=null&&l)for(var s of l(r))e.indexOf(s)<0&&u.call(r,s)&&(t[s]=r[s]);return t};const er={striped:!1,highlightOnHover:!1,captionSide:"top",horizontalSpacing:"xs",fontSize:"sm",verticalSpacing:7,withBorder:!1,withColumnBorders:!1},b=p.forwardRef((r,e)=>{const t=R("Table",er,r),{className:s,children:a,striped:c,highlightOnHover:d,captionSide:n,horizontalSpacing:y,verticalSpacing:v,fontSize:x,unstyled:j,withBorder:m,withColumnBorders:O,variant:S}=t,P=tr(t,["className","children","striped","highlightOnHover","captionSide","horizontalSpacing","verticalSpacing","fontSize","unstyled","withBorder","withColumnBorders","variant"]),{classes:w,cx:z}=Q({captionSide:n,verticalSpacing:v,horizontalSpacing:y,fontSize:x,withBorder:m,withColumnBorders:O},{unstyled:j,name:"Table",variant:S});return I.createElement(B,rr(Z({},P),{component:"table",ref:e,className:z(w.root,s),"data-striped":c||void 0,"data-hover":d||void 0}),a)});b.displayName="@mantine/core/Table";function or({appointments:r}){const e=async t=>{const s=await N(t.identification_number,t.appointment_date,t.appointment_time);if(!s){alert("404");return}s.status==="success"?(alert("成功！"),window.location.reload()):alert(s.message)};return o.jsx(o.Fragment,{children:o.jsxs(b,{striped:!0,children:[o.jsx("thead",{children:o.jsxs("tr",{children:[o.jsx("th",{children:"姓名"}),o.jsx("th",{children:"醫生"}),o.jsx("th",{children:"日期"}),o.jsx("th",{children:"時段"}),o.jsx("th",{})]})}),o.jsx("tbody",{children:r.map((t,s)=>o.jsxs("tr",{children:[o.jsx("td",{children:t.first_name+t.last_name}),o.jsx("td",{children:t.doctor_name}),o.jsx("td",{children:t.appointment_date}),o.jsx("td",{children:t.appointment_time}),o.jsx("td",{children:o.jsx(C,{variant:"default",onClick:()=>e(t),children:"取消"})})]},`${t.identification_number}--${t.appointment_date}--${t.appointment_time}`))})]})})}function lr(){const[r,e]=T(),[t,s]=p.useState([]);return p.useEffect(()=>{(async()=>{if(!e)return;const a=await D(e.identification_number);if(!a){alert("404");return}a.status==="success"?s(a.appointments):alert(a.message)})()},[]),o.jsx(E,{children:o.jsx(A,{mih:"80vh",maw:600,pt:20,children:o.jsx(L,{justify:"center",children:r?o.jsx(or,{appointments:t}):o.jsx(H,{})})})})}export{lr as AppointmentsPage};
